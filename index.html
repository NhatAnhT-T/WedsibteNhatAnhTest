<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Email Nội Bộ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f3f4f6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .email-card {
            transition: all 0.3s ease;
        }
        .email-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .toast {
            animation: slideIn 0.5s, fadeOut 0.5s 2.5s;
        }
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <header class="flex justify-between items-center mb-8 bg-white p-4 rounded-lg shadow-sm">
            <div class="flex items-center">
                <div class="flex items-center">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/ae34d8db-ca3b-4e90-9378-e3e41f3252a3.png" 
                         alt="Logo hệ thống email" 
                         class="mr-3 w-12 h-12 object-contain">
                    <h1 class="text-2xl font-bold text-gray-800">Hệ Thống Email Nội Bộ</h1>
                </div>
            </div>
            <div class="flex items-center">
                <span class="text-gray-600 mr-2">Xin chào,</span>
                <span class="font-medium text-blue-600">Người dùng</span>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <button onclick="showCompose()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Soạn thư mới
                    </button>
                </div>

                <div class="bg-white rounded-lg shadow p-4">
                    <ul>
                        <li>
                            <button onclick="filterInbox('inbox')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                                </svg>
                                Hộp thư đến
                                <span id="inbox-count" class="ml-auto bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full">5</span>
                            </button>
                        </li>
                        <li>
                            <button onclick="filterInbox('sent')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                </svg>
                                Đã gửi
                                <span id="sent-count" class="ml-auto bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full">12</span>
                            </button>
                        </li>
                        <li>
                            <button onclick="filterInbox('drafts')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                                Nháp
                                <span id="drafts-count" class="ml-auto bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full">3</span>
                            </button>
                        </li>
                        <li>
                            <button onclick="filterInbox('trash')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                                Thùng rác
                                <span id="trash-count" class="ml-auto bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full">8</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main content -->
            <div class="lg:col-span-3">
                <!-- Compose form (hidden by default) -->
                <div id="compose-form" class="hidden bg-white rounded-lg shadow p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Soạn thư mới</h2>
                    <form onsubmit="sendEmail(event)" id="email-form">
                        <div class="mb-4">
                            <label for="to" class="block text-gray-700 text-sm font-medium mb-2">Đến:</label>
                            <select id="to" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                                <option value="">Chọn người nhận</option>
                                <option value="admin@server">Admin Server</option>
                                <option value="support@server">Hỗ trợ</option>
                                <option value="hr@server">Nhân sự</option>
                                <option value="it@server">IT Support</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="subject" class="block text-gray-700 text-sm font-medium mb-2">Tiêu đề:</label>
                            <input type="text" id="subject" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div class="mb-4">
                            <label for="message" class="block text-gray-700 text-sm font-medium mb-2">Nội dung:</label>
                            <textarea id="message" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                        </div>
                        <div class="flex justify-between">
                            <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200" onclick="hideCompose()">
                                Hủy
                            </button>
                            <div>
                                <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 mr-2" onclick="saveAsDraft()">
                                    Lưu nháp
                                </button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Gửi
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Email list -->
                <div id="email-list">
                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <div class="flex justify-between items-center">
                                <h2 id="email-list-title" class="text-lg font-medium text-gray-800">Hộp thư đến</h2>
                                <div class="relative">
                                    <input type="text" placeholder="Tìm kiếm email..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute left-3 top-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- Email list items -->
                        <div id="emails-container">
                            <!-- Sample emails will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="hidden fixed bottom-4 right-4 px-6 py-3 bg-green-500 text-white rounded-lg shadow-lg toast"></div>

    <script>
        // Sample data
        const emailAccounts = [
            { value: 'admin@server', text: 'Admin Server' },
            { value: 'support@server', text: 'Hỗ trợ' },
            { value: 'hr@server', text: 'Nhân sự' },
            { value: 'it@server', text: 'IT Support' }
        ];

        const sampleEmails = {
            inbox: [
                { id: 1, from: 'admin@server', subject: 'Thông báo bảo trì hệ thống', content: 'Kính gửi toàn thể nhân viên,\n\nHệ thống sẽ được bảo trì từ 22:00 đến 23:59 ngày 15/10/2023. Vui lòng hoàn tất mọi công việc trước thời gian trên.\n\nTrân trọng,\nAdmin', date: '14/10/2023 15:30', read: false }
            ],
            sent: [
                { id: 101, to: 'admin@server', subject: 'Yêu cầu hỗ trợ', content: 'Kính gửi Admin,\n\nTôi gặp sự cố khi đăng nhập vào hệ thống. Vui lòng hỗ trợ.\n\nTrân trọng,\nNgười dùng', date: '10/10/2023 09:15', read: true }
            ],
            drafts: [],
            trash: []
        };

        let currentFolder = 'inbox';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadEmails(currentFolder);
        });

        // Show compose form
        function showCompose() {
            document.getElementById('compose-form').classList.remove('hidden');
            document.getElementById('email-list').classList.add('hidden');
        }

        // Hide compose form
        function hideCompose() {
            document.getElementById('compose-form').classList.add('hidden');
            document.getElementById('email-list').classList.remove('hidden');
            // Reset form
            document.getElementById('email-form').reset();
        }

        // Filter inbox by folder
        function filterInbox(folder) {
            currentFolder = folder;
            loadEmails(folder);
            
            // Update title
            const titles = {
                'inbox': 'Hộp thư đến',
                'sent': 'Đã gửi',
                'drafts': 'Nháp',
                'trash': 'Thùng rác'
            };
            document.getElementById('email-list-title').textContent = titles[folder];
        }

        // Load emails for a specific folder
        function loadEmails(folder) {
            const container = document.getElementById('emails-container');
            container.innerHTML = '';
            
            if (sampleEmails[folder].length === 0) {
                container.innerHTML = `
                    <div class="p-6 text-center text-gray-500">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/00b74221-29a8-4d15-b8cb-88fd43f0f9af.png" alt="Empty inbox" class="mx-auto mb-4 w-40 opacity-70">
                        <p>Không có email nào trong thư mục này</p>
                    </div>
                `;
                return;
            }
            
            sampleEmails[folder].forEach(email => {
                const fromOrTo = folder === 'sent' ? `Đến: ${emailAccounts.find(a => a.value === email.to)?.text || email.to}` : `Từ: ${emailAccounts.find(a => a.value === email.from)?.text || email.from}`;
                
                const emailElement = document.createElement('div');
                emailElement.className = `p-4 border-b border-gray-200 hover:bg-gray-50 cursor-pointer email-card ${!email.read ? 'bg-blue-50' : ''}`;
                emailElement.innerHTML = `
                    <div class="flex justify-between">
                        <h3 class="font-medium ${!email.read ? 'text-blue-600' : 'text-gray-700'}">${email.subject}</h3>
                        <span class="text-sm text-gray-500">${email.date}</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-1">${fromOrTo}</p>
                    <p class="text-sm text-gray-500 mt-2 truncate">${email.content.split('\n')[0]}</p>
                `;
                emailElement.addEventListener('click', () => viewEmail(email.id, folder));
                container.appendChild(emailElement);
            });
        }

        // View a specific email
        function viewEmail(id, folder) {
            const email = sampleEmails[folder].find(e => e.id === id);
            if (!email) return;
            
            // Mark as read if in inbox
            if (folder === 'inbox' && !email.read) {
                email.read = true;
                updateUnreadCount();
            }
            
            const container = document.getElementById('emails-container');
            container.innerHTML = '';
            
            const fromOrTo = folder === 'sent' ? `Đến: ${emailAccounts.find(a => a.value === email.to)?.text || email.to}` : `Từ: ${emailAccounts.find(a => a.value === email.from)?.text || email.from}`;
            
            const emailElement = document.createElement('div');
            emailElement.className = 'p-6';
            emailElement.innerHTML = `
                <button onclick="loadEmails(currentFolder)" class="mb-4 flex items-center text-blue-600 hover:text-blue-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Quay lại
                </button>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">${email.subject}</h2>
                    <div class="flex justify-between text-sm text-gray-500 mb-4">
                        <span>${fromOrTo}</span>
                        <span>${email.date}</span>
                    </div>
                    <div class="border-t border-gray-200 pt-4 text-gray-700 whitespace-pre-line">${email.content}</div>
                    
                    <div class="mt-6 pt-4 border-t border-gray-200 flex justify-end">
                        ${folder === 'inbox' ? `
                        <button onclick="replyEmail(${id})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mr-2">
                            Trả lời
                        </button>
                        ` : ''}
                        <button onclick="deleteEmail(${id}, '${folder}')" class="px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200">
                            Xóa
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(emailElement);
        }

        // Reply to an email
        function replyEmail(id) {
            const email = sampleEmails['inbox'].find(e => e.id === id);
            if (!email) return;
            
            showCompose();
            document.getElementById('to').value = email.from;
            document.getElementById('subject').value = `Re: ${email.subject}`;
            document.getElementById('message').value = `\n\n-------- Thư gốc --------\n${email.content}`;
        }

        // Send an email
        function sendEmail(e) {
            e.preventDefault();
            
            const to = document.getElementById('to').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            // In a real app, this would send to your server
            // Here we just simulate it
            const newEmail = {
                id: Date.now(),
                to: to,
                subject: subject,
                content: message,
                date: new Date().toLocaleString('vi-VN'),
                read: true
            };
            
            sampleEmails.sent.unshift(newEmail);
            updateEmailCounts();
            
            showToast('Email đã được gửi thành công!');
            hideCompose();
        }

        // Save as draft
        function saveAsDraft() {
            const to = document.getElementById('to').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            if (!subject && !message) {
                showToast('Nháp trống không được lưu');
                return;
            }
            
            const newDraft = {
                id: Date.now(),
                to: to,
                subject: subject || '(Không tiêu đề)',
                content: message || '(Nội dung trống)',
                date: new Date().toLocaleString('vi-VN'),
                read: true
            };
            
            sampleEmails.drafts.unshift(newDraft);
            updateEmailCounts();
            
            showToast('Nháp đã được lưu');
            hideCompose();
        }

        // Delete an email
        function deleteEmail(id, fromFolder) {
            const folderIndex = sampleEmails[fromFolder].findIndex(e => e.id === id);
            if (folderIndex === -1) return;
            
            const [deletedEmail] = sampleEmails[fromFolder].splice(folderIndex, 1);
            deletedEmail.deletedDate = new Date().toLocaleString('vi-VN');
            sampleEmails.trash.unshift(deletedEmail);
            
            updateEmailCounts();
            
            if (fromFolder === currentFolder) {
                loadEmails(currentFolder);
            }
            
            showToast('Email đã được chuyển vào thùng rác');
        }

        // Update email counts in sidebar
        function updateEmailCounts() {
            document.getElementById('inbox-count').textContent = sampleEmails.inbox.length;
            document.getElementById('sent-count').textContent = sampleEmails.sent.length;
            document.getElementById('drafts-count').textContent = sampleEmails.drafts.length;
            document.getElementById('trash-count').textContent = sampleEmails.trash.length;
            updateUnreadCount();
        }

        // Update unread count
        function updateUnreadCount() {
            const unreadCount = sampleEmails.inbox.filter(e => !e.read).length;
            const countElement = document.getElementById('inbox-count');
            countElement.textContent = unreadCount > 0 ? unreadCount : sampleEmails.inbox.length;
            countElement.className = unreadCount > 0 
                ? 'ml-auto bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full' 
                : 'ml-auto bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full';
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.remove('hidden');
            
            // Re-trigger animation
            toast.style.animation = 'none';
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.5s, fadeOut 0.5s 2.5s';
            }, 10);
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }
    </script>
</body>
</html>

